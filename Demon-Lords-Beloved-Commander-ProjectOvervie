# Demon Lord's Beloved Commander - Project Overview
**Version:** v1.2 – Added Core UI Scaling & Layout Rules  
**Last Updated:** February 20, 2026  
**Engine:** Godot 4.6+  
**VN Dialogue System:** Dialogic (Godot plugin – timelines, portraits, choices, variables, signals for battle/CG triggers)  
**Card System:** Custom singleton card battler (Commander-inspired); use open-source Godot Card Game Framework (e.g., db0's or similar from Asset Library)  
**Native Resolution:** 1920×1080 (Full HD base for design & asset creation)  
**Resolution Scalability:** Any screen size/aspect ratio supported via Godot Stretch + responsive Control layout.  
**Stretch Settings (Project Settings > Display > Window > Stretch):**  
- **Mode:** canvas_items (scales UI elements smoothly with viewport; recommended for VN + card UI)  
- **Aspect:** expand (fills screen proportionally; content stretches to fit any aspect without black bars — test alternatives like 'keep' for letterboxing if distortion concerns arise)  
- **Scale Mode:** disabled (or integer for crispness if pixel-art elements appear; test both)  
**Target Platforms:** PC first (Windows/Linux/Mac); mobile potential later  

## Core Concept & Gameplay Hybrid
- **Visual Novel (~60-70%)**: Branching story, dates, politics, explicit 18+ scenes via Dialogic timelines/signals.  
- **Card Duels (~30-40%)**: 100-card singleton battles; waifu as commander; win/loss advances story.  
- **Integration**: Dialogic variables track loyalty/Corruption → modify card abilities/unlocks.  

## Setting & World
In a dark fantasy realm torn by eternal conflict, factions vie for dominance amid ancient ruins and shadowed realms. The world features warring groups including the Human Empire, the Demon Hordes, Elven Enclaves, Dwarven Forges, and nomadic Beast Tribes. The premise revolves around possession: the once-mighty Demon Lord, defeated in a cataclysmic battle, has been reduced to a weakened orb of essence. This orb possesses the protagonist, granting dark powers but risking corruption. The story unfolds in a mix of political intrigue, conquest, and personal relationships, where the Demon Lord's influence subtly twists alliances and fates. Key locations include the protagonist's hometown (a fortified human outpost), demonic ruins, tribal wildlands, and imperial courts. Magic elements are tied to elemental affinities (fire, shadow, etc.), influencing card battles and story branches.

## Protagonist & Possession Mechanic
The protagonist is a young human male, a battle-hardened adventurer or soldier returning from a failed expedition. Exhausted and near death, he discovers the Demon Lord's orb, which possesses him to survive. The possession mechanic involves a corruption meter (0-100) that increases through choices, dialogues, and battle outcomes. Low corruption maintains the protagonist's humanity, leading to heroic paths; high corruption amplifies demonic traits, unlocking powerful but risky abilities. The Demon Lord appears as a voice/orb in early acts, weak and friendly to build trust, offering guidance during recovery. Over time, it influences decisions via Dialogic choices, with variables tracking loyalty to waifus and overall alignment. Possession effects include modified stats in cards (e.g., +damage at high corruption) and story triggers for explicit scenes or betrayals.

## Main Waifus (Legendary Commanders)
These are recruitable allies who serve as commanders in card battles, each with unique abilities, story arcs, and romance paths. They are legendary figures from various factions, drawn to the protagonist via the Demon Lord's aura. Loyalty/Corruption levels affect their card buffs and endings.

- **Miri**: Blue-haired childhood best friend yandere. A human mage with obsessive loyalty; her arc involves jealousy-driven plots and possessive romance. Commander ability: Enhances control cards (e.g., +draw on possess effects). Appearance: Slender, piercing blue eyes, magical robes.

- **Nyxelle**: Eccentric shadow sorceress from the demonic realms. Loyal but oblivious to social norms, she conflates the Demon Lord and protagonist as one entity. Her personality is whimsical yet devoted, with minimal emotional growth—focusing on chaotic magic and playful seduction. Arc: Starts as a mysterious ally, deepens through corruption-influenced dates. Commander ability: Boosts cascade mechanics (elemental chain reactions). Appearance: Long dark hair, pale skin, ornate black attire with runes; curvaceous and alluring.

- **Chesy**: Tribal warrior princess from the Beast Tribes. Inspired by fierce guardians like Ghislane, but less mature—impulsive, honorable, and under pressure from her clan's expectations. She's a melee powerhouse with a code of strength, gradually building trust through battles and vulnerability-sharing moments. Arc: Begins wary of the possession, evolves into a protective bond with explicit warrior-ritual scenes. Commander ability: Amplifies breakthrough (trample-like) and endure (vigilance) keywords. Appearance: Muscular build, wild red hair, tribal armor with fur accents; scars from battles.

- **Additional Waifus (To Be Expanded)**: Include a saintess-type healer (human faction, purity vs. corruption conflict), an elven archer (stealth and nature affinity), and a dwarven engineer (tech/magic hybrid). Each has 18+ scenes, branching dialogues, and card synergies.

## Core UI Scaling & Layout Rules (Resolution-Independent Design)
All UI (VN scenes, Dialogic overlays, card battlefield, menus, HUD) built to scale cleanly from 720p to 4K/ultrawide/mobile without manual tweaks. Design at 1920×1080, but never rely on absolute pixels for positioning/sizing.

1. **Root Layout**:
   - Every scene starts with a **Control** node as root (or CanvasLayer for overlays).
   - Set root Control anchors to **Full Rect** (preset: top-left 0,0 → bottom-right 1,1) so it fills the viewport.

2. **Primary Positioning Tool: Anchors & Presets**:
   - Use **Anchor Presets** (toolbar dropdown) for quick setup: Full Rect, Center, Top Wide, Bottom Right, etc.
   - Manual anchors for fine control (e.g., anchor_left/right/top/bottom as 0.0–1.0 fractions of parent).
   - Combine with **Margins/Offsets** for pixel-perfect padding (e.g., 20px margin on edges).

3. **Containers for Responsive Layout**:
   - Always prefer **containers** over manual positioning:
     - **VBoxContainer** / **HBoxContainer**: Stack elements vertically/horizontally; auto-resizes children.
     - **MarginContainer**: Adds automatic padding/spacing around content.
     - **CenterContainer**: Centers child perfectly (great for portraits, titles, CGs).
     - **GridContainer**: For card hands/grids or inventory.
     - **PanelContainer** / **ScrollContainer**: For framed text boxes, logs, or scrollable areas.
   - Nest containers deeply (e.g., MarginContainer → VBoxContainer → elements) for complex but adaptive layouts.

4. **Spacer Nodes**:
   - Use empty **Control** nodes as flexible spacers:
     - Set **Size Flags** → Horizontal/Vertical: Fill + Expand (to grow and push siblings apart).
     - Or set fixed **Minimum Size** (e.g., 100×0 for horizontal gap).
     - Example: In a HBoxContainer for dialogue choices → Spacer (expand) → Button → Spacer (expand) centers them.

5. **Size Flags & Minimum Sizes**:
   - On children: **Size Flags** → Fill + Expand to grow proportionally.
   - Use **Minimum Size** on key elements (e.g., cards min 200×300) to prevent squishing on small screens.
   - Dialogic portraits/bubbles: Wrap in MarginContainer or Anchor to parent for responsive placement.

6. **Dialogic-Specific Best Practices**:
   - Dialogic scenes use Control-based nodes → nest Dialogic root in a full-rect Control with anchors.
   - Portraits/Nameplates: Use Anchor Presets (e.g., Bottom Wide) or containers to pin to edges.
   - Text bubbles: MarginContainer around RichTextLabel for padding that scales.

7. **Card Battlefield Specifics**:
   - Battlefield root: Control full rect.
   - Zones (hand, battlefield, command): Use HBox/VBox/GridContainer with anchors (e.g., hand at bottom: anchor_bottom=1, anchor_top=0.7).
   - Cards: TextureRect/Control children with min_size; size flags Fill+Expand for hand spreading.
   - Scale card art with mipmaps enabled; use NinePatchRect for scalable frames.

8. **Testing & Edge Cases**:
   - Test resolutions: 1280×720, 2560×1440, 3840×2160, ultrawide (3440×1440), 16:9/21:9/4:3.
   - Window resize + fullscreen toggle.
   - Avoid hard-coded positions; debug with ProjectSettings overrides.

This approach ensures the game looks polished on any device without distortion or cutoff.

## Tech Stack & Best Practices
- **Godot 4.6+**: Core engine for 2D rendering, scenes, and scripting (GDScript preferred for simplicity).
- **Dialogic Plugin**: Handles VN elements—timelines for dialogues, choices branching to card triggers or CGs, variables for state (e.g., corruption=50 unlocks scene).
- **Card Framework**: Adapt db0's Godot Card Game Framework; singleton decks (100 cards max), JSON for card data (id, cost, effects, keywords like ethereal, breakthrough).
- **Save System**: JSON files for progress (decks, story flags, waifu loyalty).
- **Best Practices**: Modular scenes (e.g., separate VN.tscn, Battle.tscn), signals for integration (Dialogic emits "start_battle" → load card scene), version control via Git, test-driven dev for card balance.

## Tone & Content Warnings
Dark, explicit 18+ content with themes of corruption, possession, yandere obsession, violence, and seduction. Warnings: Graphic sex scenes (consensual and manipulative), gore in battles, psychological manipulation, power imbalances. Not for under 18; player discretion advised. Tone blends humor (eccentric waifus), romance, and horror (demonic influence).

## Endings & Scope
- **Scope**: 5-10 hour playtime; 3 acts (recovery/possession, recruitment/duels, conquest/climax). 100+ cards, 5-7 waifus, branching paths.
- **Endings**: Multiple (6-8) based on corruption/loyalty: Heroic (low corruption, redeem Demon Lord), Demonic (high, conquer world), Waifu-specific harem/individual, bad ends (e.g., waifu betrayal). Replay value via new game+ unlocks.

[Changelog]  
- v1.0: Initial  
- v1.1: Dialogic/tech polish  
- v1.2: Core UI Scaling & Layout Rules section added  

